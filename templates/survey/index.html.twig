{% extends 'base.html.twig' %}

{% block body %}
    <div>
        <div class="bg-gradient-to-b from-primary via-primary/80 to-primary/50 px-4 md:px-8 md:py-20 py-12">
            <div class="max-w-screen-xl mx-auto text-center">
                <div class="title">{{ title }}</div>
                <div class="mt-6 max-w-3xl mx-auto">
                    <p class="text-primary-foreground text-sm md:text-lg">
                        {{ description }}
{#                        Accéder facilement aux services essentiels de la vie quotidienne (courses, études, santé, loisirs, etc.)#}
{#                        est une priorité pour améliorer notre qualité de vie.#}
{#                        Pour adapter au mieux les solutions locales à vos besoins, votre avis compte !#}
                    </p>
                </div>
            </div>
        </div>

        <div class="bg-background mt-8 mb-12 md:shadow-xl shadow-input w-full max-w-6xl mx-auto px-4 sm:px-8 py-12">
            {{ include('include/_alert.html.twig') }}

            <div class="w-full bg-accent h-1.5 rounded-full">
                <div class="h-full bg-primary rounded-lg transition-colors ease-in-out duration-300" style="width: {{ ((page) / pages) * 100 }}%;"></div>
            </div>

            <div class="mt-8">
                {{ form_start(form, {attr: {class: 'space-y-5', 'data-controller': 'swup-submit'}}) }}
                {% if page > 0 and page <= 1 %}
                    <h3>{{ survey.title }}</h3>
                    <p class="text-sm md:text-lg">{{ survey.description }}</p>
                    <address-map></address-map>
                {% else %}
                    <h3 class="text-center">{{ survey.title }}</h3>

                    <div class="mt-3 space-y-6 max-w-xl mx-auto">
                        {% for question in survey.questions %}
                            <div class="w-full row-list">
                                {% if question.label %}
                                    <label for="answer_{{ 'response-' ~ question.id }}" class="block text-foreground text-base md:text-lg">{{ question.label }}</label>
                                {% endif %}
                                {{ form_widget(form['response-' ~ question.id]) }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="w-full flex items-center justify-center gap-x-4">
                    {{ form_widget(form.save, {attr: {'data-swup-submit-target': 'submitButton'}}) }}
                    {% for question in survey.questions %}
                        {% if not question.required %}
                            <a href="{{ path('survey_question', {'page': page}) }}" class="btn btn-outline btn-outline-accent skip-button">Passer</a>
                        {% endif %}
                    {% endfor %}
                </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
{% endblock %}
